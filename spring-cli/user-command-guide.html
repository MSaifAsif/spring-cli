<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Guide to user defined commands :: Spring CLI</title>
    <link rel="prev" href="ai-guide.html">
    <link rel="next" href="action-file-overview.html">
    <meta name="generator" content="Antora 3.0.0">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="../_/css/site.css">
    <link rel="stylesheet" href="../_/css/vendor/search.css">
    <link rel="stylesheet" href="../_/css/vendor/spring-tabs.css">

    <meta name="version" content="1.0.0">
    <meta name="component" content="spring-cli">
    <link rel="icon" href="../_/img/favicon.ico" type="image/vnd.microsoft.icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://spring.io">
        <img
          id="springlogo"
          class="block"
          src="../_/img/spring-logo.svg"
          alt="Spring"
        />
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Why Spring</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/why-spring"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/microservices"
            >Microservices</a>
            <a
              class="navbar-item"
              href="https://spring.io/reactive"
            >Reactive</a>
            <a class="navbar-item" href="https://spring.io/event-driven">Event
              Driven</a>
            <a class="navbar-item" href="https://spring.io/cloud">Cloud</a>
            <a class="navbar-item" href="https://spring.io/web-applications">Web
              Applications</a>
            <a
              class="navbar-item"
              href="https://spring.io/serverless"
            >Serverless</a>
            <a class="navbar-item" href="https://spring.io/batch">Batch</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Learn</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/learn">Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/quickstart"
            >Quickstart</a>
            <a class="navbar-item" href="https://spring.io/guides">Guides</a>
            <a class="navbar-item" href="https://spring.io/blog">Blog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a
              class="navbar-item"
              href="https://spring.io/projects"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-boot"
            >Spring Boot</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-framework"
            >Spring Framework</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud"
            >Spring Cloud</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud-dataflow"
            >Spring Cloud Data Flow</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-data"
            >Spring Data</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-integration"
            >Spring Integration</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-batch"
            >Spring Batch</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-security"
            >Spring Security</a>
            <a
              class="navbar-item navbar-item-special"
              href="https://spring.io/projects"
            >View all projects</a>
            <a class="navbar-item" href="https://spring.io/tools">Spring Tools 4</a>
            <a
              class="navbar-item navbar-item-special-2"
              href="https://start.spring.io"
            >Spring Initializr
              <svg
                class="external-link-icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
              ><polyline
                  points="15 10.94 15 15 1 15 1 1 5.06 1"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><polyline
                  points="8.93 1 15 1 15 7.07"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><line
                  x1="15"
                  y1="1"
                  x2="8"
                  y2="8"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></line></svg></a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Academy</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.academy/courses"
            >Courses</a>
            <a
              class="navbar-item"
              href="https://spring.academy/learning-path"
            >Get Certified</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/support">Overview</a>
            <a class="navbar-item" href="https://spring.io/security">Security
              Advisories</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable is-community">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/community"
            >Overview</a>
            <a class="navbar-item" href="https://spring.io/events">Events</a>
            <a class="navbar-item" href="https://spring.io/team">Team</a>
          </div>
        </div>
      </div>
    </div>
    <label class="theme-toggler">
      <input
        type="checkbox"
        type="checkbox"
        id="switch-theme-checkbox"
        name="switch-theme-checkbox"
      />
      <span class="icon"><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="moon"
          class="svg-inline--fa fa-moon moon"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 384 512"
        ><path
            fill="currentColor"
            d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"
          ></path>
        </svg>
        <svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="sun"
          class="svg-inline--fa fa-sun sun"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        ><path
            fill="currentColor"
            d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"
          ></path>
        </svg></span>
      <span class="text">light</span>
    </label>
  </nav>
</header>
<script>
!function (theme) {
  if (theme === 'dark') {
    document.getElementById('switch-theme-checkbox').parentElement.classList.add('active')
  }
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
</script><div class="body">
<div class="nav-container" data-component="spring-cli" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">spring-cli</span>
  <span class="version">1.0.0-SNAPSHOT</span>
</div><ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="creating-new-projects.html">Creating New Projects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="registering-new-projects.html">Registering Projects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="adding-to-existing-projects.html">Adding to Existing Projects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="boot-add-guide.html">Using "boot add"</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ai-guide.html">Using to "ai commands"</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="user-command-guide.html">User defined commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="action-file-overview.html">Overview of Action Files</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="action-guide.html">Guide to Action Files</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="special-commands-guide.html">Guide to Special commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="initializr.html">Guide to Initializr commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="readme-command-guide.html">Guide to README commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="key-concepts.html">Key Concepts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="comments-on-the-approach.html">Comments on the approach</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="glossary.html">Glossary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Commands</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/boot-add.html">boot add</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/boot-new.html">boot new</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/help.html">help</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/stacktrace.html">stacktrace</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/clear.html">clear</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/quit.html">quit</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/completion-bash.html">completion bash</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/history.html">history</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/version.html">version</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/script.html">script</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/command-remove.html">command remove</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/command-add.html">command add</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/command-new.html">command new</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/config-list.html">config list</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/config-unset.html">config unset</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/config-set.html">config set</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/github-auth-status.html">github auth status</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/github-auth-login.html">github auth login</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/github-auth-logout.html">github auth logout</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/initializr-remove.html">initializr remove</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/initializr-list.html">initializr list</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/initializr-set.html">initializr set</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/initializr-dependencies.html">initializr dependencies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/initializr-new.html">initializr new</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/catalog-add.html">catalog add</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/catalog-list.html">catalog list</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/catalog-remove.html">catalog remove</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/project-list.html">project list</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/project-add.html">project add</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="commands/project-remove.html">project remove</a>
  </li>
</ul>
  </li>
</ul>
        </nav>
      </div>
    </div>
<ul id="nav-versions" class="nav-versions">
  <li class="component is-current">
    <a class="title" href="index.html">spring-cli</a>
    <ul class="versions">
      <li class="version is-current is-latest">
        <a href="index.html">
          1.0.0-SNAPSHOT<span class="current">current</span>
        </a>
      </li>
    </ul>
  </li>
</ul>
    <div class="resize-handle--x"><span></span></div>
  </aside>
</div><main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div
      class="toc"
      data-title="Guide to user defined commands"
      data-levels="2"
    >
      <div class="toc-menu"></div>
    </div>
      <div class="edit-this-page"><a href="https://github.com/spring-projects-experimental/spring-cli/edit/main/docs/modules/ROOT/pages/user-command-guide.adoc">Edit this Page</a></div>
      </div>
</aside><div class="doc">
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">spring-cli</a></li>
    <li><a href="user-command-guide.html">User defined commands</a></li>
  </ul>
</nav>
<article>
<h1 id="page-title" class="page">Guide to user defined commands</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>User defined commands let you add custom commands to the Spring CLI.
The directory structure commands represents the command and sub-command that are introduced into the shell.</p>
</div>
<div class="paragraph">
<p>For example, the directory structure of <code>controller\new</code> translates to the command <code>controller new</code> in the CLI.</p>
</div>
<div class="paragraph">
<p>The files located in the sub-command directory are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A file named <code>command.yaml</code> that describes the command and its arguments.</p>
</li>
<li>
<p>One or more Action Files that describe the actions to take to add code or configuration to the project.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>User defined commands are registered with the CLI using the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">command add --from &lt;repository-url&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The contents of that repository are copied into your existing project.</p>
</div>
<div class="paragraph">
<p>As an example, look at the contents of the repository <a href="https://github.com/rd-1-2022/udc-spring-controller" class="bare">https://github.com/rd-1-2022/udc-spring-controller</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_structure"><a class="anchor" href="#_structure"></a>Structure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The directory structure for all user defined commands are under the path</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">.spring/commands</code></pre>
</div>
</div>
<div class="paragraph">
<p>So for the user defined command <code>controller new</code> mentioned previously, the full directory structure where the command description file and action files are located would be</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">.spring/commands/controller/new</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside this directory you can define
  * The file <code>command.yaml</code> that describes what the command does and the arguments of the command
  * One or more Action Files that define the actions to execute for this command.</p>
</div>
<div class="paragraph">
<p>For example, the directory contents of the repository <a href="https://github.com/rd-1-2022/udc-spring-controller" class="bare">https://github.com/rd-1-2022/udc-spring-controller</a> are</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">.
├── README.adoc
└── .spring
    └── commands
        └── controller
            └── new
                ├── command.yaml
                ├── create-controller.yaml
                └── RestController.java</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_describing_the_command"><a class="anchor" href="#_describing_the_command"></a>Describing the command</h3>
<div class="paragraph">
<p>The contents of the <code>command.yaml</code> file for the <code>controller new</code> command mentioned previously is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">command:
  description: Generate a new Spring Controller
  options:
    #
    - name: feature
      description: name of the feature package
      dataType: string
      defaultValue: person
      inputType: text
      required: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The file contains a brief description of the command and an array of command line options.</p>
</div>
<div class="paragraph">
<p>The <code>name</code> of the options is required.  The default <code>dataType</code> is <code>string</code></p>
</div>
<div class="paragraph">
<p>The <code>dataType</code> can be <code>int</code>, <code>integer</code>, <code>bool</code>, <code>boolean</code>, <code>double</code>, <code>float</code>, <code>long</code>, <code>short</code>, and <code>string</code>.</p>
</div>
<div class="paragraph">
<p>The CLI incorporates these commands at runtime and appear when asking for general help and the command help.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$spring help

&lt;output truncated&gt;

User-defined Commands
       controller new: Generate a new Spring Controller</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ spring help controller new
NAME
       controller new - Generate a new Spring Controller

SYNOPSIS
       controller new --feature String

OPTIONS
       --feature String
       name of the feature package
       [Optional, default = person]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_action_files"><a class="anchor" href="#_action_files"></a>Action Files</h3>
<div class="paragraph">
<p>Action files are structred similar to GitHub Action files.</p>
</div>
<div class="paragraph">
<p>Acitons files can be named anything you like, the CLI will look for files with a <code>.yaml</code> or <code>.yml</code> file extension</p>
</div>
<div class="paragraph">
<p>There can be as many action files as you need to accomplish a specific task.  The order of Action Files execution is depth first and alphabetical.</p>
</div>
<div class="paragraph">
<p>Here is a very simple example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">actions:
  - generate:
      to: hello.txt
      text: Hello at {{now}} on {{os-name}}.</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will generate the file <code>hello.txt</code>, if it does not already exist, in the current working directory.
The template contents contains kebab-case variable names.</p>
</div>
<div class="paragraph">
<p>The variables <code>user-name</code> and <code>os-name</code> come from Java system properties and are automatically registered with the template engine.
The variable <code>now</code> is the value of <code>new java.util.Date()</code> when the command was executed.</p>
</div>
<div class="paragraph">
<p>As a more realistic example to create Java code, the Action File named <code>Controller.java</code> in the repository <a href="https://github.com/rd-1-2022/udc-spring-controller" class="bare">https://github.com/rd-1-2022/udc-spring-controller</a> is shown below.  The <code>feature</code> variable is a command option</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Command File</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">command:
  description: Generate a new Spring Controller
  options:
    #
    - name: feature
      description: name of the feature package
      dataType: string
      defaultValue: person
      inputType: text</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Action File</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">actions:
  - generate:
      to: src/main/java/{{root-package-dir}}/{{feature}}/{{capitalizeFirst feature}}Controller.java
      from: RestController.java</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Templated Java File</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The file <code>RestController.java</code> is a templated text file shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package {{root-package}}.{{feature}};

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class {{capitalizeFirst feature}}Controller {

	@GetMapping("/{{feature}}")
	public String greeting() {
		return "Hello {{feature}}";
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>to:</code> field defines the location of the file to be generated.</p>
</div>
<div class="paragraph">
<p>If the file to generate already exists, it will not be overwritten unless the additional field <code>overwrite:</code> at the same level of <code>generate</code> is added at the same level of the <code>to:</code> field.</p>
</div>
<div class="paragraph">
<p>All command line arguments are passed to the template engine as variables, in this case the <code>feature</code> option.</p>
</div>
<div class="paragraph">
<p>One of the useful built-in variables is <code>root-package-dir</code> which is the directory where the class containing the <code>@SpringApplication</code> annotation is located.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_template_engine"><a class="anchor" href="#_template_engine"></a>Template Engine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The template engine is <a href="https://github.com/jknack/handlebars.java">Handlebars</a>.
Several Handlebar helpers are registered by default</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/jknack/handlebars.java#string-helpers">StringHelpers</a></p>
</li>
<li>
<p><a href="https://github.com/jknack/handlebars.java#humanize">HumanizeHelper</a></p>
</li>
<li>
<p><a href="https://github.com/jknack/handlebars.java#conditional-helpers">Conditional Helpers</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the previous example, the template variable <code>{{capitalizeFirst feature}}</code> is an example of using a Handlebar helper</p>
</div>
<div class="paragraph">
<p>Several system variables are exposed to the template engine by default.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>System.getProperties()</code> is available under <code>{{system-properties}}</code></p>
</li>
<li>
<p><code>System.getenv()</code> is available under <code>{{system-environment}}</code></p>
</li>
<li>
<p>The current time defined by <code>new Date().toString()</code> is available under <code>{{now}}</code></p>
</li>
<li>
<p>The System Property <code>java.io.tmpdir</code> is available under <code>{{tmp-dir}}</code></p>
</li>
<li>
<p>The System Property <code>file.separator</code> is available under <code>{{file-separator}}</code></p>
</li>
<li>
<p>The System Property <code>os.name</code> is available under <code>{{os-name}}</code></p>
</li>
<li>
<p>The System Property <code>user.name</code> is available under <code>{{user.name}}</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Java package name where the Spring Boot main application class resides is available under <code>{{root-package}}</code></p>
</div>
<div class="paragraph">
<p>The directory where the Spring Boot main applicaiton class resides is available under <code>{{root-package-dir}}</code></p>
</div>
<div class="paragraph">
<p>The Maven model exposes several variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{{artifact-id}}</code></p>
</li>
<li>
<p><code>{{artifact-version}}</code></p>
</li>
<li>
<p><code>{{artifact-path}}</code></p>
</li>
<li>
<p><code>{{project-name}}</code></p>
</li>
<li>
<p><code>{{project-descriptoin}}</code></p>
</li>
<li>
<p><code>{{maven-model}</code> - This the class <a href="https://maven.apache.org/ref/3.9.0/maven-model/apidocs/org/apache/maven/model/Model.html">org.apache.maven.model.Model</a></p>
</li>
<li>
<p><code>{{maven-properties}}</code> - This is a Java Properties object that has as keys, the values of what each entry in the POM&#8217;s <code>&lt;properties&gt;</code> section.</p>
</li>
<li>
<p><code>{{java-version}}</code> - This looks for a Maven Property in the POM of the name <code>java.version</code>.  If it the value is <code>1.8</code>, it is converted to the value <code>8</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_new_user_defined_command"><a class="anchor" href="#_creating_a_new_user_defined_command"></a>Creating a new user defined command</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A simple way to get started is to run the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">spring command new hello create</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates an user defined command named <code>hello</code> with the sub-command named <code>create</code>.</p>
</div>
<div class="paragraph">
<p>You can view the full set of options for <code>spring command new</code> by executing <code>spring command new --help</code>.
The output is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ spring command new --help
NAME
       command new - Create a new user-defined command

SYNOPSIS
       command new --commandName String --subCommandName String --path String --help

OPTIONS
       --commandName String
       The name of the user-defined command to create
       [Optional, default = hello]

       --subCommandName String
       The name of the user-defined sub-command to create
       [Optional, default = new]

       --path String
       Path to execute command in
       [Optional]

       --help or -h
       help for command new
       [Optional]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Executing <code>spring command new hello create</code> generates following directory structure and files as discussed previously.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">.
├── README.adoc
└── .spring
    └── commands
        └── hello
            └── create
                ├── command.yaml
                └── hello.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The contents of the <code>command.yaml</code> file is shown below.  It contains one command line argument, named <code>greeting</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">command:
  description: Generate a new file with a hello message
  options:
    #
    - name: greeting
      description: who or what to say hello to
      dataType: string
      defaultValue: World
      inputType: text     # TEXT</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the action file <code>hello.yaml</code> is shown below.  It generates the file named <code>hello.txt</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">actions:
  - generate:
      to: hello.txt
      text: Hello {{greeting}} at {{now}} on {{os-name}}.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command is listed under the heading <code>User-defined Commands</code> when executing the command <code>spring help</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">...
User-defined Commands
       hello create: Generate a new file with a hello message</code></pre>
</div>
</div>
<div class="paragraph">
<p>Executing the command <code>spring hello create</code> generates the file hello.txt with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">Hello World at Mar 9, 2023 on Linux.</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_learning_more"><a class="anchor" href="#_learning_more"></a>Learning more</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The section <a href="action-file-overview.html" class="xref page">Action Guide</a> describes all the options available for you to use in Action Files to add or modify code and configuration to a project.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="ai-guide.html">Using to "ai commands"</a></span>
  <span class="next"><a href="action-file-overview.html">Overview of Action Files</a></span>
</nav>
</article>
</div>  </div>
</main>
</div>
<footer class="footer flex">
    <div id="spring-links flex">
        <img id="springlogo" src="../_/img/spring-logo.svg" alt="Spring">
        <p class="smallest antialiased">© <script>var d = new Date();
        document.write(d.getFullYear());</script> <a href="https://www.vmware.com/">VMware</a>, Inc. or its affiliates. <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> • <a href="https://www.vmware.com/help/privacy.html" rel="noopener noreferrer">Privacy</a> • <a href="https://spring.io/trademarks">Trademark Guidelines</a> <span id="thank-you-mobile">• <a href="https://spring.io/thank-you">Thank you</a></span> • <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> • <a class="ot-sdk-show-settings">Cookie Settings</a> <span id="teconsent"></span></p>
        <p class="smallest antialiased has-gray-text">Apache®, Apache Tomcat®, Apache Kafka®, Apache Cassandra&trade;, and Apache Geode&trade; are trademarks or registered trademarks of the Apache Software Foundation in the United States and/or other countries. Java&trade;, Java&trade; SE, Java&trade; EE, and OpenJDK&trade; are trademarks of Oracle and/or its affiliates. Kubernetes® is a registered trademark of the Linux Foundation in the United States and other countries. Linux® is the registered trademark of Linus Torvalds in the United States and other countries. Windows® and Microsoft® Azure are registered trademarks of Microsoft Corporation. “AWS” and “Amazon Web Services” are trademarks or registered trademarks of Amazon.com Inc. or its affiliates. All other trademarks and copyrights are property of their respective owners and are only mentioned for informative purposes. Other names may be trademarks of their respective owners.</p>
    </div>
    <div id="social-icons" class="flex jc-between">
        <a href="https://www.youtube.com/user/SpringSourceDev" title="Youtube"><svg id="youtube-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><circle class="cls-1" cx="20" cy="20" r="20"/><path class="cls-2" d="M30.91,14.53a2.89,2.89,0,0,0-2-2C27.12,12,20,12,20,12s-7.12,0-8.9.47a2.9,2.9,0,0,0-2,2A30.56,30.56,0,0,0,8.63,20a30.44,30.44,0,0,0,.46,5.47,2.89,2.89,0,0,0,2,2C12.9,28,20,28,20,28s7.12,0,8.9-.47a2.87,2.87,0,0,0,2-2A30.56,30.56,0,0,0,31.37,20,28.88,28.88,0,0,0,30.91,14.53ZM17.73,23.41V16.59L23.65,20Z"/></svg></a>
        <a href="https://github.com/spring-projects" title="Github"><svg id="github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><path class="cls-1" d="M38,0a38,38,0,1,0,38,38A38,38,0,0,0,38,0Z"/></g><path class="cls-2" d="M38,15.59A22.95,22.95,0,0,0,30.71,60.3c1.15.21,1.57-.5,1.57-1.11s0-2,0-3.9c-6.38,1.39-7.73-3.07-7.73-3.07A6.09,6.09,0,0,0,22,48.86c-2.09-1.42.15-1.39.15-1.39a4.81,4.81,0,0,1,3.52,2.36c2,3.5,5.37,2.49,6.67,1.91a4.87,4.87,0,0,1,1.46-3.07c-5.09-.58-10.45-2.55-10.45-11.34a8.84,8.84,0,0,1,2.36-6.15,8.29,8.29,0,0,1,.23-6.07s1.92-.62,6.3,2.35a21.82,21.82,0,0,1,11.49,0c4.38-3,6.3-2.35,6.3-2.35a8.29,8.29,0,0,1,.23,6.07,8.84,8.84,0,0,1,2.36,6.15c0,8.81-5.37,10.75-10.48,11.32a5.46,5.46,0,0,1,1.56,4.25c0,3.07,0,5.54,0,6.29s.42,1.33,1.58,1.1A22.94,22.94,0,0,0,38,15.59Z"/></svg></a>
        <a href="https://twitter.com/springcentral" title="Twitter"><svg id="twitter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><circle class="cls-1" cx="37.97" cy="37.97" r="37.97"/><path id="Twitter-2" data-name="Twitter" class="cls-2" d="M55.2,22.73a15.43,15.43,0,0,1-4.88,1.91,7.56,7.56,0,0,0-5.61-2.49A7.78,7.78,0,0,0,37,30a7.56,7.56,0,0,0,.2,1.79,21.63,21.63,0,0,1-15.84-8.23,8,8,0,0,0,2.37,10.52,7.66,7.66,0,0,1-3.48-1v.09A7.84,7.84,0,0,0,26.45,41a7.54,7.54,0,0,1-2,.28A7.64,7.64,0,0,1,23,41.09a7.71,7.71,0,0,0,7.18,5.47,15.21,15.21,0,0,1-9.55,3.37,15.78,15.78,0,0,1-1.83-.11,21.41,21.41,0,0,0,11.78,3.54c14.13,0,21.86-12,21.86-22.42,0-.34,0-.68,0-1a15.67,15.67,0,0,0,3.83-4.08,14.9,14.9,0,0,1-4.41,1.24A7.8,7.8,0,0,0,55.2,22.73Z"/></svg></a>
    </div>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/spring-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>
  </body>
</html>
